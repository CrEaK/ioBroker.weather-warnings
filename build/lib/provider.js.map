{
  "version": 3,
  "sources": ["../../src/lib/provider.ts"],
  "sourcesContent": ["// Provider\n\nimport axios from 'axios';\nimport WeatherWarnings from '../main';\nimport * as definitionen from './def/definitionen';\nimport { BaseClass, Library } from './library';\nimport * as providerDef from './def/provider-def';\nimport { MessagesClass } from './messages';\nimport * as NotificationClass from './notification';\nimport { getTestData } from './test-warnings';\nimport * as NotificationType from './def/notificationService-def';\nimport * as messagesDef from './def/messages-def';\nexport const DIV = '-';\ntype ProviderOptionsTypeInternal = {\n    service: providerDef.providerServices;\n    warncellId: string | [string, string];\n} & (StringProviderOptionsType | CoordinateProviderOptionsType);\n\ntype ProviderOptionsType = ProviderOptionsTypeInternal;\n\ntype StringProviderOptionsType = BaseProviderOptionsType & {\n    warncellId: string;\n};\ntype CoordinateProviderOptionsType = BaseProviderOptionsType & {\n    warncellId: [string, string];\n};\ntype BaseProviderOptionsType = {\n    providerController: ProviderController;\n    language: string;\n    filter: providerDef.messageFilterType;\n    customName: string;\n};\n\n/** Base class for every provider */\nexport class BaseProvider extends BaseClass {\n    service: providerDef.providerServices;\n    url: string = '';\n    warncellId: string | Array<string> = '';\n    rawData: providerDef.DataImportType = null;\n    library: Library;\n    messages: MessagesClass[] = [];\n    noMessage: MessagesClass;\n    providerController: ProviderController;\n    filter: providerDef.messageFilterType;\n    customName: string = '';\n    warncellIdString: string;\n\n    constructor(adapter: WeatherWarnings, options: ProviderOptionsTypeInternal, name: string) {\n        let warncell = typeof options.warncellId == 'string' ? options.warncellId : options.warncellId.join(DIV);\n        warncell = warncell.replaceAll('.', '_');\n        super(adapter, 'provider.' + `${name}.${warncell}`);\n\n        this.warncellIdString = warncell;\n        this.service = options.service;\n        this.library = this.adapter.library;\n        this.providerController = options.providerController;\n        this.setService(options.service);\n        this.log.setLogPrefix(`${name}-${options.warncellId}`);\n        this.filter = options.filter;\n        this.customName = options.customName;\n\n        this.noMessage = new MessagesClass(this.adapter, 'noMessage', null, {}, this.providerController, this);\n        this.noMessage.updateFormated();\n        const temp = this.library.cloneGenericObject(\n            //@ts-expect-error ist vorhanden\n            definitionen.statesObjectsWarnings[this.service]._channel,\n        ) as ioBroker.DeviceObject;\n        temp.common.name = name.toUpperCase();\n        this.library.writedp('provider.' + name, undefined, temp);\n\n        this.init();\n    }\n    async init(): Promise<void> {\n        const temp = this.library.cloneGenericObject(definitionen.defaultChannel) as ioBroker.ChannelObject;\n        temp.common.name = this.customName;\n        await this.library.writedp(`${this.name}`, undefined, temp);\n        await this.adapter.extendObjectAsync(`${this.name}`, {\n            common: { name: this.customName },\n        });\n\n        await this.library.writedp(`${this.name}.info`, undefined, definitionen.genericStateObjects.info._channel);\n        await this.library.writedp(\n            `${this.name}.formatedKeys`,\n            undefined,\n            definitionen.genericStateObjects.formatedKeysDevice,\n        );\n\n        this.setConnected(false);\n    }\n\n    async delete(): Promise<void> {\n        super.delete();\n        this.rawData = null;\n        await this.library.memberDeleteAsync(this.messages);\n        this.messages = [];\n        await this.setConnected(false);\n    }\n\n    getService(): providerDef.providerServices {\n        if (!this.service) {\n            throw new Error(`baseProvider.getService service is ${this.service == '' ? `''` : `undefined`}`);\n        }\n        return this.service;\n    }\n    /*getStatesObjectsWarnings(key: string): { [key: string]: ioBroker.Object } {\n        return statesObjectsWarnings[this.service][key];\n    }*/\n\n    setService(service: providerDef.providerServices): boolean {\n        if (\n            !service ||\n            ['dwdService', 'zamgService', 'uwzService', 'ninaService', 'metroService'].indexOf(service) === -1\n        ) {\n            throw new Error(`baseProvider.setService service ${service} is unknowed!`);\n        }\n        this.service = service;\n        return true;\n    }\n\n    /**\n     * @param url if '' url from PROVIDER_OPTIONS is taken\n     * @param keys [string] values to replace - placeholder #  # #+  +# #++  ++# and so on\n     */\n    static getUrl(url: string = '', keys: string[], service: keyof typeof definitionen.PROVIDER_OPTIONS): string {\n        let result = '';\n        if (!url) {\n            result = definitionen.PROVIDER_OPTIONS[service]['url'];\n        } else {\n            result = url;\n        }\n        let placeholder = '#  #';\n        for (const k in keys) {\n            result = result.replace(placeholder, keys[k]);\n            placeholder = placeholder.slice(0, 1) + '+' + placeholder.slice(1, -1) + '+' + placeholder.slice(-1);\n        }\n        return result;\n    }\n    async setConnected(status: boolean): Promise<void> {\n        this.providerController.connection = this.providerController.connection || status;\n        await this.library.writedp(\n            `${this.name}.info.connection`,\n            !!status,\n            definitionen.genericStateObjects.info.connection,\n        );\n    }\n\n    async getAlertsAndWrite(): Promise<messagesDef.genericWarntypeAlertJsonType> {\n        const reply: any = {};\n        for (const t in messagesDef.genericWarntyp) {\n            if (t == '0') continue;\n            reply[messagesDef.genericWarntyp[Number(t) as keyof messagesDef.genericWarntypeType].id] = {\n                level: -1,\n                start: 1,\n                end: 1,\n                headline: '',\n                active: false,\n                type: -1,\n            };\n        }\n        const warntypeArray: string[] = [];\n        if (!reply) throw new Error('error(234) reply not definied');\n        for (const a in this.messages) {\n            const m = this.messages[a];\n            if (!m) continue;\n            const name = messagesDef.genericWarntyp[m.genericType].id;\n            if (name == 'none') continue;\n            if (reply[name] === undefined) continue;\n            if (m.endtime < Date.now()) continue;\n\n            if (\n                (m.starttime <= Date.now() && reply[name].level < m.level) ||\n                (m.starttime > Date.now() && (reply[name].start === 1 || reply[name].start > m.starttime))\n            ) {\n                warntypeArray.push(this.library.getTranslation(messagesDef.genericWarntyp[m.genericType].name));\n                reply[name] = {\n                    level: m.level,\n                    start: m.starttime,\n                    end: m.endtime,\n                    headline: m.formatedData !== undefined ? String(m.formatedData.headline) : '',\n                    active: m.starttime <= Date.now() && m.endtime >= Date.now(),\n                    type: m.genericType,\n                };\n            }\n        }\n        reply['asList'] = warntypeArray.filter((item, pos, arr) => arr.indexOf(item) == pos).join(', ');\n\n        await this.library.writeFromJson(\n            this.name + '.alerts',\n            'allService.alerts',\n            definitionen.statesObjectsWarnings,\n            reply,\n            false,\n        );\n\n        return reply;\n    }\n    // General function that retrieves data\n    async getDataFromProvider(): Promise<providerDef.DataImportType> {\n        if (!this.url || !this.warncellId) {\n            this.log.debug(\n                // eslint-disable-next-line prettier/prettier\n                `Warn (31) this.url: ${this.url} this.warncellid: ${this.warncellId} this.service: ${this.getService()}`,\n            );\n        }\n        try {\n            if (this.unload) {\n                return;\n            }\n\n            // show test mode in Info states\n            this.library.writedp(\n                `${this.name}.info.testMode`,\n                this.adapter.config.useTestWarnings,\n                definitionen.genericStateObjects.info.testMode,\n            );\n            if (this.adapter.config.useTestWarnings) {\n                return this.library.cloneGenericObject(\n                    getTestData(this.service, this.adapter) as object,\n                ) as providerDef.DataImportType;\n            } else {\n                const data = await axios.get(this.url);\n                if (data.status == 200) {\n                    await this.setConnected(true);\n\n                    const result = typeof data.data == 'object' ? data.data : JSON.parse(data.data);\n\n                    this.library.writedp(\n                        `${this.name}.warning.warning_json`,\n                        JSON.stringify(result),\n                        definitionen.genericStateObjects.warnings_json,\n                    );\n                    if (this.adapter.config.useJsonHistory) {\n                        const dp = `${this.name}.warning.jsonHistory`;\n                        const state = this.library.readdp(dp);\n                        let history: object[] = [];\n                        if (state && state.val && typeof state.val == 'string') history = JSON.parse(state.val);\n                        history.unshift(result);\n                        this.library.writedp(dp, JSON.stringify(history), definitionen.genericStateObjects.jsonHistory);\n                    }\n                    this.library.writedp(\n                        `${this.name}.lastUpdate`,\n                        Date.now(),\n                        definitionen.genericStateObjects.lastUpdate,\n                    );\n                    return result;\n                } else {\n                    this.log.warn('Warn(23) ' + data.statusText);\n                }\n            }\n        } catch (error) {\n            if (axios.isAxiosError(error)) {\n                this.log.warn(`Warn(21) axios error for ${this.getService()} url: ${this.url}`);\n            } else {\n                this.log.error(`Error(22) no data for ${this.getService()} from ${this.url} with Error ${error}`);\n            }\n        }\n        await this.setConnected(false);\n        return null;\n    }\n    //** Called at the end of updateData() from every childclass */\n    async finishUpdateData(): Promise<void> {\n        let index = -1;\n        this.messages.sort((a, b) => {\n            return a.starttime - b.starttime;\n        });\n        for (let m = 0; m < this.messages.length; m++) {\n            index = m;\n            await this.messages[m].writeFormatedKeys(m);\n        }\n        for (index++; index < this.adapter.numOfRawWarnings; index++) {\n            await this.noMessage.writeFormatedKeys(index);\n        }\n        await this.library.garbageColleting(\n            `${this.name}.formatedKeys`,\n            (this.providerController.refreshTime || 600000) / 2,\n        );\n        await this.library.garbageColleting(\n            `${this.name}.warning`,\n            (this.providerController.refreshTime || 600000) / 2,\n        );\n    }\n\n    async updateData(data: any, counter: number): Promise<void> {\n        if (!data) return;\n        this.library.writedp(`${this.name}.warning`, undefined, definitionen.genericStateObjects.warningDevice);\n        await this.library.writeFromJson(\n            `${this.name}.warning.${('00' + counter.toString()).slice(-2)}`,\n            `${this.service}.raw`,\n            definitionen.statesObjectsWarnings,\n            data,\n        );\n    }\n    /** Remove marked Messages. */\n    async clearMessages(): Promise<void> {\n        for (let m = 0; m < this.messages.length; m++) {\n            this.messages[m].newMessage = false;\n            if (this.messages[m].notDeleted == false) {\n                this.log.debug('Remove a warning from db.');\n                this.messages.splice(Number(m--), 1);\n            }\n        }\n    }\n    async finishTurn(): Promise<void> {\n        this.adapter.library.writedp(\n            `${this.name}.summary`,\n            undefined,\n            definitionen.genericStateObjects.summary._channel,\n        );\n        this.adapter.library.writedp(\n            `${this.name}.summary.warntypes`,\n            this.messages.map((a) => (a.formatedData ? a.formatedData.warntypegenericname : '')).join(', '),\n            definitionen.genericStateObjects.summary.warntypes,\n        );\n    }\n}\n\n// nuzte klassen um Daten zu parsen\nexport class DWDProvider extends BaseProvider {\n    constructor(adapter: WeatherWarnings, options: StringProviderOptionsType) {\n        super(adapter, { ...options, service: 'dwdService' }, `dwd`);\n        this.warncellId = options.warncellId;\n        const url =\n            definitionen.PROVIDER_OPTIONS.dwdService.url_base +\n            (this.warncellId.startsWith('9') || this.warncellId.startsWith('10')\n                ? definitionen.PROVIDER_OPTIONS.dwdService.url_appendix_land\n                : definitionen.PROVIDER_OPTIONS.dwdService.url_appendix_town) +\n            definitionen.PROVIDER_OPTIONS.dwdService.url_language;\n        this.url = DWDProvider.getUrl(url, [this.warncellId, options.language], this.service);\n    }\n    async updateData(): Promise<void> {\n        const result = (await this.getDataFromProvider()) as providerDef.dataImportDwdType;\n        if (!result) return;\n        this.log.debug(`Got ${result.features.length} warnings from server`);\n        result.features.sort((a, b) => {\n            return new Date(a.properties.ONSET).getTime() - new Date(b.properties.ONSET).getTime();\n        });\n        this.messages.forEach((a) => (a.notDeleted = false));\n        for (let a = 0; a < this.adapter.numOfRawWarnings && a < result.features.length; a++) {\n            const w = result.features[a];\n            if (w.properties.STATUS == 'Test') continue;\n            if (\n                this.filter.hours > 0 &&\n                new Date(w.properties.ONSET).getTime() > Date.now() + this.filter.hours * 3600000\n            )\n                continue;\n            await super.updateData(w.properties, a);\n\n            /**\n             * filter messages dwd\n             */\n            const index = this.messages.findIndex((m) => m.rawWarning.IDENTIFIER == w.properties.IDENTIFIER);\n\n            if (index == -1) {\n                const nmessage = new MessagesClass(\n                    this.adapter,\n                    'dwd-msg',\n                    this,\n                    w.properties,\n                    this.providerController,\n                );\n                await nmessage.updateFormated();\n\n                if (nmessage && nmessage.filter(this.filter)) this.messages.push(nmessage);\n            } else {\n                await this.messages[index].updateData(w.properties);\n            }\n        }\n        for (let n = 0; n < this.messages.length; n++) {\n            const newmsg = this.messages[n];\n            if (!newmsg.newMessage) continue;\n            for (let o = 0; o < this.messages.length; o++) {\n                const oldmsg = this.messages[o];\n                if (oldmsg.newMessage) continue;\n                if (oldmsg.formatedData === undefined || newmsg.formatedData === undefined) continue;\n                if (oldmsg.rawWarning.EC_II != newmsg.rawWarning.EC_II) continue;\n                if (oldmsg.starttime > newmsg.endtime || newmsg.starttime > oldmsg.endtime) continue;\n                newmsg.silentUpdate();\n                this.log.debug('Remove a old warning.(Silent Update)');\n                if (o <= n) n--;\n                this.messages.splice(o--, 1);\n                break;\n            }\n        }\n        await this.finishUpdateData();\n    }\n}\n\nexport class ZAMGProvider extends BaseProvider {\n    constructor(adapter: WeatherWarnings, options: CoordinateProviderOptionsType) {\n        super(adapter, { ...options, service: 'zamgService' }, `zamg`);\n        this.warncellId = options.warncellId;\n        this.url = ZAMGProvider.getUrl('', [this.warncellId[0], this.warncellId[1], options.language], this.service);\n    }\n\n    async updateData(): Promise<void> {\n        const result = (await this.getDataFromProvider()) as providerDef.dataImportZamgType;\n        if (!result) return;\n\n        if (!result.properties || !result.properties.warnings) {\n            this.log.debug(`Got 0 warnings from server`);\n            return;\n        } else this.log.debug(`Got ${result.properties.warnings.length} warnings from server`);\n        result.properties.warnings.sort((a, b) => {\n            return Number(a.properties.rawinfo.start) - Number(b.properties.rawinfo.start);\n        });\n        this.messages.forEach((a) => (a.notDeleted = false));\n        for (let a = 0; a < this.adapter.numOfRawWarnings && a < result.properties.warnings.length; a++) {\n            if (\n                this.filter.hours > 0 &&\n                Number(result.properties.warnings[a].properties.rawinfo.start) >\n                    Date.now() / 1000 + this.filter.hours * 3600\n            )\n                continue;\n            // special case for zamg\n            result.properties.warnings[a].properties.location = result.properties.location.properties.name;\n            result.properties.warnings[a].properties.nachrichtentyp = result.properties.warnings[a].type;\n            await super.updateData(result.properties.warnings[a].properties, a);\n            const data = JSON.parse(\n                JSON.stringify(result.properties.warnings[a].properties),\n            ) as providerDef.dataImportZamgTypeProperties;\n            const index = this.messages.findIndex((m) => {\n                if (this.adapter.config.zamgEveryChange) {\n                    data.chgid = m.rawWarning.chgid;\n                    data.create = m.rawWarning.create;\n                    if (data.updategrund !== '')\n                        this.log.warn(\n                            `ZAMG: result.properties.warnings[${a}].properties.updategrund: ${data.updategrund} - Please post this line in the forum or on Github.`,\n                        );\n                    return JSON.stringify(data) == JSON.stringify(m.rawWarning);\n                } else {\n                    return (\n                        m.rawWarning.warnid == result.properties.warnings[a].properties.warnid &&\n                        result.properties.warnings[a].properties.rawinfo.wlevel == m.rawWarning.rawinfo.wlevel &&\n                        result.properties.warnings[a].properties.rawinfo.wtype == m.rawWarning.rawinfo.wtype\n                    );\n                }\n            });\n            if (index == -1) {\n                const nmessage = new MessagesClass(\n                    this.adapter,\n                    'zamg-msg',\n                    this,\n                    result.properties.warnings[a].properties,\n                    this.providerController,\n                );\n                await nmessage.updateFormated();\n                if (nmessage && nmessage.filter(this.filter)) this.messages.push(nmessage);\n            } else {\n                await this.messages[index].updateData(result.properties.warnings[a].properties);\n            }\n        }\n        await this.finishUpdateData();\n    }\n}\n\nexport class UWZProvider extends BaseProvider {\n    constructor(adapter: WeatherWarnings, options: StringProviderOptionsType) {\n        super(adapter, { ...options, service: 'uwzService' }, `uwz`);\n        this.warncellId = options.warncellId.toUpperCase();\n        this.url = BaseProvider.getUrl('', [this.warncellId, options.language], this.service);\n    }\n\n    static async getWarncell(\n        warncellId: [string, string],\n        service: providerDef.providerServices,\n\n        that: any,\n    ): Promise<string> {\n        try {\n            const result = await axios.get(\n                UWZProvider.getUrl(\n                    definitionen.PROVIDER_OPTIONS.uwzService.warncellUrl,\n                    [warncellId[0], warncellId[1]],\n                    service,\n                ),\n            );\n            if (result) {\n                if (result.data && result.data[0]) {\n                    return result.data[0].AREA_ID;\n                }\n            }\n            that.log.error(`No valid warncell found for ${JSON.stringify(warncellId)!}`);\n        } catch (error: any) {\n            that.log.warn(`Dont get warncell. ${JSON.stringify(error.toJSON)}`);\n        }\n        return '';\n    }\n    async updateData(): Promise<void> {\n        const result = (await this.getDataFromProvider()) as providerDef.dataImportUWZType;\n        if (!result || !result.results || result.results == null) {\n            this.log.warn('Invalid result from uwz server!');\n            return;\n        }\n        result.results.sort((a, b) => {\n            if (a && b && a.dtgStart && b.dtgStart) return a.dtgStart - b.dtgStart;\n            return 0;\n        });\n        this.messages.forEach((a) => (a.notDeleted = false));\n        for (let a = 0; a < this.adapter.numOfRawWarnings && a < result.results.length; a++) {\n            if (result.results[a] == null) continue;\n            if (this.filter.hours > 0 && result.results[a].dtgStart > Date.now() / 1000 + this.filter.hours * 3600)\n                continue;\n            await super.updateData(result.results[a], a);\n\n            const index = this.messages.findIndex((m) => m.rawWarning.payload.id == result.results[a].payload.id);\n            if (index == -1) {\n                const nmessage = new MessagesClass(\n                    this.adapter,\n                    'uwz-msg',\n                    this,\n                    result.results[a],\n                    this.providerController,\n                );\n                await nmessage.updateFormated();\n                if (nmessage && nmessage.filter(this.filter)) this.messages.push(nmessage);\n            } else {\n                await this.messages[index].updateData(result.results[a]);\n            }\n        }\n        this.log.debug(`Got ${result.results.length} warnings from server`);\n\n        await this.finishUpdateData();\n    }\n}\nexport class NINAProvider extends BaseProvider {\n    constructor(adapter: WeatherWarnings, options: CoordinateProviderOptionsType) {\n        super(adapter, { ...options, service: 'ninaService' }, `nina`);\n    }\n}\nexport class METROProvider extends BaseProvider {\n    constructor(adapter: WeatherWarnings, options: CoordinateProviderOptionsType) {\n        super(adapter, { ...options, service: 'metroService' }, `nina`);\n    }\n}\nexport class ProviderController extends BaseClass {\n    providers: providerDef.ProviderClassType[] = [];\n    refreshTimeRef: ioBroker.Timeout | undefined = undefined;\n    alertTimeoutRef: ioBroker.Timeout | undefined = undefined;\n    connection = true;\n    name = 'provider';\n    refreshTime: number = 300000;\n    library: Library;\n    notificationServices: NotificationClass.NotificationClass[] = [];\n    noWarning: MessagesClass;\n    pushOn = false;\n    //globalSpeakSilentTime: ({ profil: string; day: number[]; start: number; end: number } | null)[] = [];\n    testStatus = 0;\n    activeMessages = 0;\n    speakProfiles: string[] = [];\n    silentTime: { shouldSpeakAllowed?: boolean; forceOff: boolean; profil: providerDef.silentTimeConfigType[][] } = {\n        forceOff: false,\n        profil: [],\n    };\n    constructor(adapter: WeatherWarnings) {\n        super(adapter, 'provider');\n        this.library = this.adapter.library;\n        this.noWarning = new MessagesClass(this.adapter, this.name, null, {}, this);\n        this.noWarning.newMessage = false;\n        this.noWarning.notDeleted = false;\n        this.doEndOfUpdater.bind(this);\n    }\n    async init(): Promise<void> {\n        this.pushOn = !this.adapter.config.notPushAtStart; // ups wrong variable name PushAtStart\n        this.refreshTime = this.adapter.config.refreshTime * 60000;\n\n        const typeStates: string[] = [];\n        for (const a in messagesDef.genericWarntyp) {\n            //@ts-expect-error dann so\n            typeStates[a] = this.library.getTranslation(messagesDef.genericWarntyp[a].name);\n        }\n        definitionen.statesObjectsWarnings.allService.formatedkeys.warntypegeneric.common.states = typeStates;\n        //update FormatedDataObjects\n        const states = await this.adapter.getStatesAsync('provider.*');\n        for (const state in states) {\n            if (state.includes('.formatedKeys.')) {\n                const key = state\n                    .split('.')\n                    .pop() as keyof typeof definitionen.statesObjectsWarnings.allService.formatedkeys;\n                if (definitionen.statesObjectsWarnings.allService.formatedkeys[key] != undefined) {\n                    const def = definitionen.statesObjectsWarnings.allService.formatedkeys[key];\n                    def.common.name =\n                        typeof def.common.name == 'string'\n                            ? await this.library.getTranslationObj(def.common.name)\n                            : def.common.name;\n                    await this.adapter.extendObjectAsync(\n                        state.replace(`${this.adapter.name}.${this.adapter.instance}.`, ''),\n                        definitionen.statesObjectsWarnings.allService.formatedkeys[key],\n                    );\n                }\n            }\n        }\n\n        const profileNames: string[] = [];\n        if (this.adapter.config.silentTime !== undefined) {\n            for (let p = 0; p < this.adapter.config.silentTime.length; p++) {\n                if (!this.adapter.config.silentTime[p].speakProfile) continue;\n                if (this.adapter.config.silentTime[p].silentTime.length == 0) continue;\n                profileNames.push(this.adapter.config.silentTime[p].speakProfile);\n                this.speakProfiles.push(this.adapter.config.silentTime[p].speakProfile);\n                this.silentTime.profil.push(\n                    (this.adapter.config.silentTime[p].silentTime || [])\n                        .map((item): providerDef.silentTimeConfigType | null => {\n                            const result: providerDef.silentTimeConfigType = {\n                                day: [],\n                                start: 0,\n                                end: 0,\n                            };\n                            if (\n                                typeof item !== 'object' ||\n                                item === null ||\n                                typeof item.start !== 'string' ||\n                                typeof item.end !== 'string' ||\n                                item.day === null ||\n                                !Array.isArray(item.day) ||\n                                item.day.length == 0\n                            )\n                                return null;\n                            for (const a in item) {\n                                const b = a as keyof typeof item;\n                                if (b != 'day' && item[b].indexOf(':') != -1) {\n                                    const t = item[b].split(':');\n                                    if (Number.isNaN(t[0])) return null;\n                                    if (!Number.isNaN(t[1]) && parseInt(t[1]) > 0) {\n                                        t[1] = String(parseInt(t[1]) / 60);\n                                        item[b] = String(parseFloat(t[0]) + parseFloat(t[1]));\n                                    } else if (isNaN(item[b] as unknown as number)) return null;\n                                    else item[b] = t[0];\n                                }\n                                if (b == 'day') result.day = item.day;\n                                else if (b == 'end') result.end = parseFloat(item.end);\n                                else result.start = parseFloat(item.start);\n                            }\n                            this.log.info(\n                                `Silent time added: Profil: ${this.adapter.config.silentTime[p].speakProfile} start: ${\n                                    result.start\n                                } end: ${result.end} days: ${JSON.stringify(result.day)}`,\n                            );\n                            return result.day.length != 0 && result.start != result.end ? result : null;\n                        })\n                        .filter((f) => f != null) as providerDef.silentTimeConfigType[],\n                );\n            }\n            definitionen.statesObjectsWarnings.allService.commands.silentTime.profil.common.states = profileNames;\n            this.library.writedp(\n                `commands.silentTime`,\n                undefined,\n                definitionen.statesObjectsWarnings.allService.commands.silentTime._channel,\n            );\n            for (const a in definitionen.actionStates) {\n                const dp = a as keyof typeof definitionen.actionStates;\n                const data = definitionen.actionStates[dp];\n                if (!this.library.readdp(String(dp))) await this.library.writedp(String(dp), data.default, data.def);\n                else {\n                    const def = definitionen.actionStates[dp].def;\n                    const obj = await this.adapter.getObjectAsync(String(dp));\n                    if (obj) {\n                        obj.common = def.common;\n                        await this.adapter.setObjectAsync(String(dp), obj);\n                    }\n                }\n            }\n        }\n\n        /*\n        // this code ist to swap genericWarntyp to ids with a array of warntypes\n        const warntyp = messagesDef.genericWarntyp;\n        const mixedWarntyp: any = {};\n        Object.entries(warntyp).forEach((element) => {\n            mixedWarntyp.dwdService = mixedWarntyp.dwdService || {};\n            mixedWarntyp.uwzService = mixedWarntyp.uwzService || {};\n            mixedWarntyp.zamgService = mixedWarntyp.zamgService || {};\n            element[1].dwdService.forEach(\n                (a) => (mixedWarntyp.dwdService[`${a}`] = [...(mixedWarntyp.dwdService[`${a}`] || []), element[1].id]),\n            );\n            element[1].uwzService.forEach(\n                (a) => (mixedWarntyp.uwzService[`${a}`] = [...(mixedWarntyp.uwzService[`${a}`] || []), element[1].id]),\n            );\n            element[1].zamgService.forEach(\n                (a) =>\n                    (mixedWarntyp.zamgService[`${a}`] = [...(mixedWarntyp.zamgService[`${a}`] || []), element[1].id]),\n            );\n        });\n        const resultWarntyp: any = [];\n        for (const a in mixedWarntyp) {\n            if (!resultWarntyp[a]) resultWarntyp[a] = [];\n            for (const b in mixedWarntyp[a]) {\n                let add = true;\n                for (const c in resultWarntyp) {\n                    if (resultWarntyp[c].type) {\n                        if (\n                            mixedWarntyp[a][b].every((x: any) => resultWarntyp[c].type.includes(x)) &&\n                            resultWarntyp[c].type.every((x: any) => mixedWarntyp[a][b].includes(x))\n                        ) {\n                            add = false;\n                            if (resultWarntyp[c][a] == undefined) resultWarntyp[c][a] = [];\n                            resultWarntyp[c][a].push(b);\n                            break;\n                        }\n                    }\n                }\n                if (add) {\n                    const t: any = { type: mixedWarntyp[a][b] };\n                    t[a] = [b];\n                    resultWarntyp.push(t);\n                }\n            }\n        }\n        const result: any = {};\n        for (const a in resultWarntyp) {\n            if (!resultWarntyp[a].type) continue;\n            result[a] = resultWarntyp[a];\n            result[a].id = resultWarntyp[a].type.join(', ');\n            result[a].name = 'noname';\n            delete result[a].type;\n        }\n        this.log.debug(JSON.stringify(result));*/\n    }\n    /**\n     * Create a notificationService\n     * @param optionList specialcase: adapter == '' then it is createn anyway\n     * @returns\n     */\n    async createNotificationService(optionList: NotificationType.OptionsType): Promise<void> {\n        for (const a in optionList) {\n            const options = optionList[a as keyof NotificationType.OptionsType];\n            if (options === undefined) return;\n            let tempAdapters = [options.adapter];\n            if (options.useadapterarray && options.adapters) {\n                tempAdapters = options.adapters;\n            }\n            for (const a of tempAdapters) {\n                options.adapter = a;\n                const objs =\n                    options.adapter != ''\n                        ? await this.adapter.getObjectViewAsync('system', 'instance', {\n                              startkey: `system.adapter.${options.adapter}`,\n                              endkey: `system.adapter.${options.adapter}`,\n                          })\n                        : null;\n                if (!options.useadapter || (objs && objs.rows && objs.rows.length > 0)) {\n                    const noti = new NotificationClass.NotificationClass(\n                        this.adapter,\n                        JSON.parse(JSON.stringify(options)),\n                    );\n                    this.notificationServices.push(noti);\n                    await noti.init();\n                } else {\n                    this.log.error(\n                        `Configuration: ${options.name} is active, but dont find ${options.adapter} adapter!`,\n                    );\n                    throw new Error(\n                        `Configuration: ${options.name} is active, but dont find ${options.adapter} adapter!`,\n                    );\n                }\n            }\n        }\n    }\n\n    createProviderIfNotExist(options: ProviderOptionsType): providerDef.ProviderClassType {\n        const index = this.providers.findIndex(\n            (p) =>\n                p &&\n                ((typeof p.warncellId == 'string' && p.warncellIdString == options.warncellId) ||\n                    (typeof options.warncellId == 'object' && options.warncellId.join(DIV) == p.warncellIdString)) &&\n                p.getService() == options.service,\n        );\n        if (index == -1) {\n            let p: providerDef.ProviderClassType;\n            switch (options.service) {\n                case 'dwdService':\n                    if (Array.isArray(options.warncellId)) {\n                        throw new Error('Error 122 warncellId is a Array');\n                    }\n                    p = new DWDProvider(this.adapter, {\n                        ...options,\n                        warncellId: options.warncellId,\n                        providerController: this,\n                    });\n                    break;\n                case 'uwzService':\n                    if (Array.isArray(options.warncellId)) {\n                        throw new Error('Error 123 warncellId is a Array');\n                    }\n                    p = new UWZProvider(this.adapter, {\n                        ...options,\n                        warncellId: options.warncellId,\n                        providerController: this,\n                    });\n                    break;\n                case 'zamgService':\n                    if (!Array.isArray(options.warncellId)) {\n                        throw new Error('Error 124 warncellId is not an Array');\n                    }\n                    p = new ZAMGProvider(this.adapter, {\n                        ...options,\n                        warncellId: options.warncellId,\n                        providerController: this,\n                    });\n                    break;\n                case 'ninaService':\n                    if (!Array.isArray(options.warncellId)) {\n                        throw new Error('Error 125 warncellId is not an Array');\n                    }\n                    p = new NINAProvider(this.adapter, {\n                        ...options,\n                        warncellId: options.warncellId,\n                        providerController: this,\n                        language: this.adapter.config.dwdLanguage,\n                    });\n                    break;\n                default:\n                    throw new Error('Error 126 service is not defined');\n                //todo add metroServicce\n            }\n            if (p) this.providers.push(p);\n            return p;\n        } else {\n            this.log.error('Attempt to create an existing provider.');\n            return this.providers[index];\n        }\n    }\n\n    async delete(): Promise<void> {\n        super.delete();\n        await this.library.memberDeleteAsync(this.providers);\n        await this.library.memberDeleteAsync(this.notificationServices);\n        this.providers = [];\n        this.notificationServices = [];\n        await this.setConnected(false);\n        if (this.refreshTimeRef) this.adapter.clearTimeout(this.refreshTimeRef);\n        if (this.alertTimeoutRef) this.adapter.clearTimeout(this.alertTimeoutRef);\n    }\n\n    updateEndless(that: ProviderController): void {\n        if (that.adapter.config.useTestCase) {\n            if (++that.testStatus > 3) that.testStatus = 1;\n            that.adapter.config.useTestWarnings = true;\n            that.refreshTime = 60000;\n        }\n        that.connection = false;\n        if (that.refreshTimeRef) that.adapter.clearTimeout(that.refreshTimeRef);\n        if (that.providers.length == 0) {\n            that.setConnected(false);\n            return;\n        }\n        updater(that);\n        async function updater(self: any, index: number = 0): Promise<void> {\n            const that = self; //as ProviderController;\n            if (that.unload) return;\n            if (index < that.providers.length) {\n                if (that.providers[index]) await that.providers[index].updateData();\n                index++;\n                that.refreshTimeRef = that.adapter.setTimeout(updater, 250, that, index);\n            } else {\n                await that.doEndOfUpdater();\n                that.refreshTimeRef = that.adapter.setTimeout(that.updateEndless, that.refreshTime || 600000, that);\n            }\n        }\n    }\n    async updateAlertEndless(self: any): Promise<void> {\n        const that = self as ProviderController;\n        if (that.unload) return;\n        await that.setSpeakAllowed();\n        await that.checkAlerts();\n        /** update every minute after 1.333 seconds. Avoid the full minute, full second and half second :) */\n        const timeout = 61333 - (Date.now() % 60000);\n        that.alertTimeoutRef = that.adapter.setTimeout(that.updateAlertEndless, timeout, that);\n    }\n\n    async checkAlerts(): Promise<void> {\n        for (const p in this.providers) {\n            await this.providers[p].getAlertsAndWrite();\n        }\n    }\n\n    async doEndOfUpdater(): Promise<void> {\n        this.setConnected();\n        await this.updateMesssages();\n        this.activeMessages = 0;\n        for (const a in this.providers) {\n            let am = 0;\n            for (const b in this.providers[a].messages) {\n                if (this.providers[a].messages[b].notDeleted) {\n                    am++;\n                }\n            }\n            this.adapter.library.writedp(\n                `${this.providers[a].name}.activeWarnings`,\n                am,\n                definitionen.genericStateObjects.activeWarnings,\n            );\n            this.activeMessages += am;\n        }\n\n        if (this.pushOn) {\n            for (const push of this.notificationServices) {\n                await push.sendMessage(this.providers, ['new', 'remove', 'all', 'removeAll']);\n            }\n        }\n        this.pushOn = true;\n        await this.adapter.library.writedp(\n            `${this.name}.activeWarnings`,\n            this.activeMessages,\n            definitionen.genericStateObjects.activeWarnings,\n        );\n        this.providers.forEach((a) => a.clearMessages());\n        this.providers.forEach((a) => a.finishTurn());\n        this.log.debug(`We have ${this.activeMessages} active messages.`);\n    }\n    providersExist(): boolean {\n        return this.providers.length > 0;\n    }\n    async setConnected(status: boolean = this.connection): Promise<void> {\n        await this.adapter.library.writedp(\n            `info.connection`,\n            !!status,\n            definitionen.genericStateObjects.info.connection,\n        );\n    }\n\n    async onStatePush(id: string): Promise<boolean> {\n        if (!id.includes('commands.send_message.')) return false;\n        id = id.replace(`${this.adapter.namespace}.`, '');\n        const cmd = id.split('.').pop() as NotificationType.Type;\n        const service = id.split('.').slice(0, -3).join('.');\n        let index = -1;\n        let providers = [];\n        if ((index = this.providers.findIndex((a) => a.name == service)) > -1) {\n            providers.push(this.providers[index]);\n        } else {\n            providers = this.providers;\n        }\n        let result = false;\n        for (const push of this.notificationServices) {\n            if (cmd == push.name && push.canManual()) {\n                await push.sendMessage(providers, [...NotificationType.manual, 'removeAll'], true);\n                await this.library.writedp(id, false);\n                result = true;\n            }\n        }\n        return result;\n    }\n\n    async finishInit(): Promise<void> {\n        for (const p of [...this.providers, this]) {\n            const channel =\n                (p instanceof BaseProvider ? `${this.adapter.namespace}.${p.name}` : `${this.adapter.namespace}`) +\n                '.commands';\n            const commandChannel = `${channel}.send_message`;\n\n            await this.library.writedp(\n                channel,\n                undefined,\n                definitionen.statesObjectsWarnings.allService.commands._channel,\n            );\n\n            await this.library.writedp(\n                commandChannel,\n                undefined,\n                definitionen.statesObjectsWarnings.allService.commands.send_message._channel,\n            );\n            await this.library.writedp(\n                channel + '.clearHistory',\n                false,\n                definitionen.statesObjectsWarnings.allService.commands.clearHistory,\n            );\n\n            const states = this.library.getStates(`${commandChannel}.*`.replace('.', '\\\\.'));\n            states[`${commandChannel}`] = undefined;\n            for (const n of this.notificationServices) {\n                if (n.options.notifications.findIndex((a) => NotificationType.manual.indexOf(a) != -1) == -1) continue;\n                if (!(p instanceof BaseProvider) || n.options.service.indexOf(p.service) != -1) {\n                    const dp = `${commandChannel}.${n.name}`;\n                    states[dp] = undefined;\n                    await this.library.writedp(\n                        dp,\n                        false,\n                        definitionen.statesObjectsWarnings.allService.commands.send_message[\n                            n.name as NotificationType.Type\n                        ],\n                    );\n                }\n            }\n            for (const dp in states) {\n                if (states[dp] !== undefined) {\n                    await this.adapter.delObjectAsync(dp);\n                    this.log.debug(`Remove state ${dp}`);\n                }\n            }\n            await this.adapter.subscribeStatesAsync(channel + '.*');\n        }\n    }\n\n    async clearHistory(id: string): Promise<boolean> {\n        if (!id.endsWith('.clearHistory')) return false;\n        let targets: any[] = [];\n        this.providers.forEach((a) => {\n            if (id.includes(a.name)) targets.push(a);\n        });\n        if (targets.length == 0) targets = [...this.providers, this];\n        let result = false;\n        for (const a in targets) {\n            try {\n                const dp = `${targets[a].name}.history`;\n                await this.adapter.library.writedp(dp, '[]', definitionen.genericStateObjects.history);\n                result = true;\n            } catch (error: any) {\n                this.log.error(error);\n            }\n        }\n        if (result) await this.library.writedp(id.replace(`${this.adapter.namespace}.`, ''), false);\n        return result;\n    }\n\n    setAllowedDirs(allowedDirs: any): void {\n        const dirs = [];\n        for (const a in allowedDirs) {\n            if (!allowedDirs[a].dpWarning)\n                dirs.push(`^provider\\\\.${a.replace(`Service`, ``)}\\\\.[a-zA-Z0-9\\-_]+\\\\.warning`);\n            if (!allowedDirs[a].dpAlerts)\n                dirs.push(`^provider\\\\.${a.replace(`Service`, ``)}\\\\.[a-zA-Z0-9\\-_]+\\\\.alerts`);\n            /*if (!allowedDirs[a].dpMessage)\n                dirs.push(`^provider\\\\.${a.replace(`Service`, ``)}\\\\.[a-zA-Z0-9\\-_]+\\\\.messages`);*/\n            if (!allowedDirs[a].dpFormated)\n                dirs.push(`^provider\\\\.${a.replace(`Service`, ``)}\\\\.[a-zA-Z0-9\\-_]+\\\\.formatedKeys`);\n\n            this.library.setForbiddenDirs(dirs);\n        }\n    }\n    async updateMesssages(): Promise<void> {\n        for (const a in this.providers) {\n            for (const b in this.providers[a].messages) {\n                await this.providers[a].messages[b].updateFormatedData();\n                await this.providers[a].messages[b].writeFormatedKeys(Number(b));\n            }\n        }\n    }\n    async setSpeakAllowed(id: string = ''): Promise<boolean> {\n        if (id !== '') {\n            id = id.replace(`${this.adapter.namespace}.`, '');\n            if (definitionen.actionStates[id] === undefined) return false;\n            this.log.debug(`Set speak ${id.split('.').slice(-1).join('.')} to ${this.library.readdp(id)!.val}`);\n            this.library.writedp(id, this.library.readdp(id)!.val);\n            if (definitionen.actionStates[id].onlyAck) return true;\n        }\n        if (this.isSilentAuto()) {\n            const profil = this.getSpeakProfil();\n            let isSpeakAllowed = true;\n\n            if (\n                this.silentTime !== undefined &&\n                this.silentTime.profil[profil] &&\n                Array.isArray(this.silentTime.profil[profil])\n            ) {\n                const now = new Date().getHours() + new Date().getMinutes() / 60;\n                const day = String(new Date().getDay());\n                for (const t of this.silentTime.profil[profil]) {\n                    if (t === null) continue;\n                    if (t.day.indexOf(day) == -1) continue;\n                    if (t.start < t.end) {\n                        if (t.start <= now && t.end > now) {\n                            isSpeakAllowed = false;\n                            break;\n                        }\n                    } else {\n                        if (t.start <= now || t.end > now) {\n                            isSpeakAllowed = false;\n                            break;\n                        }\n                    }\n                    isSpeakAllowed = true;\n                }\n            }\n            if (isSpeakAllowed !== this.silentTime.shouldSpeakAllowed) {\n                await this.library.writedp(\n                    `commands.silentTime.isSpeakAllowed`,\n                    isSpeakAllowed,\n                    definitionen.statesObjectsWarnings.allService.commands.silentTime.isSpeakAllowed,\n                );\n                this.silentTime.shouldSpeakAllowed = isSpeakAllowed;\n            }\n        } else this.silentTime.shouldSpeakAllowed = undefined;\n        return true;\n    }\n    isSilentAuto(): boolean {\n        const result = this.library.readdp(`commands.silentTime.autoMode`);\n        return result != undefined && !!result.val;\n    }\n    isSpeakAllowed(): boolean {\n        const result = this.library.readdp(`commands.silentTime.isSpeakAllowed`);\n        return (result != undefined && !!result.val) || result == undefined;\n    }\n    getSpeakProfil(): number {\n        const result = this.library.readdp(`commands.silentTime.profil`);\n        return result != undefined && typeof result.val == 'number' ? result.val : 0;\n    }\n}\n"],
  "mappings": "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",
  "names": ["axios", "a", "that"]
}
